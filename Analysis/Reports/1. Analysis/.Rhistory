# filter(Country=="Austria", scenario_group=="gain") %>%
mutate(se_theta = sqrt(sum(1/n))) %>%
group_by(price, Country) %>% filter(row_number()==1) %>% select(-response) %>%
group_by(Country) %>%
mutate(OR = Odds[price=="low"]/Odds[price=="high"],
theta = log(OR)) %>% filter(row_number()==1) %>%
select(-c(OR, Odds, n)) %>% ungroup()
data_Play_theta <- data_Play %>%
# EXCLUSION: Full Exclusion
filter( !(Country %in% countries2remove) ) %>%
filter( attention_check_grater_than_3 ) %>%
# Calculate mean Finantial Literacy
group_by(Country) %>%
mutate(FinancialLiteracy = mean(FinancialLiteracy)) %>%
# Calculate ODD RATIO
group_by(loss, response, Country) %>%
mutate(n = n()) %>% filter(row_number()==1) %>%
group_by(loss, Country) %>%
mutate(Odds = n[response==1]/n[response==0]) %>%
group_by(loss, Country) %>%
# filter(Country=="Austria", scenario_group=="gain") %>%
mutate(se_theta = sqrt(sum(1/n))) %>%
group_by(loss, Country) %>% filter(row_number()==1) %>% select(-response) %>%
group_by(Country) %>%
mutate(OR = Odds[loss=="cash"]/Odds[loss=="ticket"],
theta = log(OR)) %>% filter(row_number()==1) %>%
select(-c(OR, Odds, n)) %>% ungroup()
data_Gym_theta <- data_Gym %>%
# EXCLUSION: Full Exclusion
filter( !(Country %in% countries2remove) ) %>%
filter( attention_check_grater_than_3 ) %>%
# Calculate mean Finantial Literacy
group_by(Country) %>%
mutate(FinancialLiteracy = mean(FinancialLiteracy)) %>%
# Calculate Mean Difference
group_by(frame, Country) %>% mutate(n = n()) %>%
group_by(Country) %>%
mutate(pooled_sd = sd(response),
md = mean(response[frame=="Yearly"])-mean(response[frame=="Per-session"]),
theta = md/pooled_sd) %>%
group_by(frame, Country) %>% filter(row_number()==1) %>%
group_by(Country) %>%
# -- Calculate standard error -- #
mutate(first = sum(n) / (n[frame=="Per-session"]*n[frame=="Yearly"]),
second = theta[1]^2/(2*sum(n)),
se_theta = sqrt(first+second)) %>%
filter(row_number()==1) %>% ungroup() %>%
select(-c(md, first, second, pooled_sd, n, response))
data_Plane_theta <- data_Plane %>%
# EXCLUSION: Full Exclusion
filter( !(Country %in% countries2remove) ) %>%
filter( attention_check_grater_than_3 ) %>%
# Calculate mean Finantial Literacy
group_by(Country) %>%
mutate(FinancialLiteracy = mean(FinancialLiteracy)) %>%
# Calculate ODD RATIO
group_by(coupon, response, Country) %>%
mutate(n = n()) %>% filter(row_number()==1) %>%
group_by(coupon, Country) %>%
mutate(Odds = n[response==1]/n[response==0]) %>%
group_by(coupon, Country) %>%
# filter(Country=="Austria", scenario_group=="gain") %>%
mutate(se_theta = sqrt(sum(1/n))) %>%
group_by(coupon, Country) %>% filter(row_number()==1) %>% select(-response) %>%
group_by(Country) %>%
mutate(OR = Odds[coupon=="purchased"]/Odds[coupon=="free"],
theta = log(OR)) %>% filter(row_number()==1) %>%
select(-c(OR, Odds, n)) %>% ungroup()
theta_preregisteredExclusion <- list(
MrAB = data_MrAB_theta %>%
mutate(study="MrAB", x=ifelse(scenario_group=="gain", 1.2, 1.8),
family="binomial") %>%
select(-c(X, scenario)) %>% rename(condition = scenario_group),
Game = data_Game_theta %>% mutate(study="Game", x=3, family="binomial") %>%
select(-c(X, market_value)) %>% rename(condition = buyer),
Drink = data_Drink_theta %>% mutate(study="Drink", x=1, family="gaussian") %>%
select(-c(X)) %>% rename(condition = store),
Jacket = data_Jacket_theta %>% mutate(study="Jacket", x=4, family="binomial") %>%
select(-c(X)) %>% rename(condition = price),
Play = data_Play_theta %>% mutate(study="Play", x=5, family="binomial") %>%
select(-c(X)) %>% rename(condition = loss),
Gym = data_Gym_theta %>% mutate(study="Gym", x=2, family="gaussian") %>%
select(-c(X)) %>% rename(condition = frame),
Plane = data_Plane_theta %>% mutate(study="Plane", x=6, family="binomial") %>%
select(-c(X)) %>% rename(condition = coupon)
)
theta_preregisteredExclusion$MrAB$FinancialLiteracy
hist(theta_preregisteredExclusion$MrAB$FinancialLiteracy)
lazyLoad("Report_cache/html/fit-MrAB-finantial-literacy_38c1e464027e5e4225ab734dd4b1fb41")
lazyLoad("Report_cache/html/fit-MrAB-finantial-literacy_3c6336b4c6cc2482adb5f563c9e628d8")
summary( mMrAB1 )
?brm
# Load libraries
library(dplyr); library(purrr); library(stringr)
library(ggplot2); library(ggpubr); library(jcolors)
library(cowplot); library(ggprism); library(tidybayes)
library(reshape2); library(parallel); library(rstan)
library(brms)
library(plotly)
# Load data
data_MrAB <- read.csv(file = "../../Data/data_MrAB.csv")
data_Game <- read.csv(file = "../../Data/data_Game.csv")
data_Drink <- read.csv(file = "../../Data/data_Drink.csv")
data_Jacket <- read.csv(file = "../../Data/data_Jacket.csv")
data_Play <- read.csv(file = "../../Data/data_Play.csv")
data_Gym <- read.csv(file = "../../Data/data_Gym.csv")
data_Plane <- read.csv(file = "../../Data/data_Plane.csv")
data_MrAB %>%
filter(attention_check_grater_than_3)
head(data_MrAB,1)
data_MrAB %>%
group_by(Country) %>% filter(row_number()==1) %>%
ungroup() %>% nrow()
data_MrAB %>%
group_by(Country) %>% filter(row_number()==1) %>%
ungroup() %>%
filter(attention_check_grater_than_3)
data_MrAB %>%
group_by(Country) %>% filter(row_number()==1) %>%
ungroup() %>%
filter(attention_check_grater_than_3) %>%
nrow()
data_MrAB %>%
group_by(Country) %>% filter(row_number()==1) %>%
ungroup() %>% nrow()
data_MrAB %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
filter(row_number()==1) %>%
ungroup() %>% nrow()
data_MrAB %>%
group_by(Country) %>%
summarise(sample_size=n())
data_MrAB %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
ungroup() %>% nrow()
data_MrAB %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
ungroup() %>% nrow() %>%
filter(sample>=250)
data_MrAB %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
ungroup() %>% nrow() %>%
filter(sample_size>=250)
data_MrAB %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
ungroup() %>% #nrow() %>%
filter(sample_size>=250)
data_MrAB %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
ungroup() %>% #nrow() %>%
filter(sample_size>=250) %>% nrow()
data_MrAB %>%
group_by(Country) %>%
summarise(sample_size=n())
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
ungroup() %>% #nrow() %>%
filter(sample_size>=250) %>% nrow()
data_MrAB %>%
filter(attention_check_grater_than_2) %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
ungroup() %>% #nrow() %>%
filter(sample_size>=250) %>% nrow()
data_MrAB %>%
filter(attention_check_grater_than_3) %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
ungroup() %>% #nrow() %>%
filter(sample_size>=250) %>% nrow()
original_theta <- readRDS('../../Data/original_theta.rds')
data_paper <- map_dfr(1:length(original_theta), function(i) original_theta[[i]])
countries2remove <- data_MrAB %>%
filter(attention_check_grater_than_3) %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
filter(sample_size<=250) %>%
.[,"Country", drop=TRUE]
countries2remove_attention_check_grater_than_2 <- data_MrAB %>%
filter(attention_check_grater_than_2) %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
filter(sample_size<=250) %>%
.[,"Country", drop=TRUE]
countries2remove
32-length( countries2remove )
data_MrAB %>%
filter(attention_check_grater_than_3) %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
ungroup() %>% #nrow() %>%
filter(sample_size>=250) %>% nrow()
data_MrAB[1,]
data_MrAB %>%
filter(attention_check_grater_than_3) %>%
group_by(subject,Country) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
ungroup() %>% #nrow() %>%
filter(sample_size>=250) %>% nrow()
data_MrAB %>%
filter(attention_check_grater_than_3) %>%
group_by(subject,Country) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
ungroup() %>% #nrow() %>%
filter(sample_size>250) %>% nrow()
data_MrAB %>%
filter(attention_check_grater_than_3) %>%
group_by(subject,Country) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
ungroup() %>% #nrow() %>%
filter(sample_size>=250) %>% nrow()
countries2remove <- data_MrAB %>%
filter(attention_check_grater_than_3) %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
filter(sample_size<250) %>%
.[,"Country", drop=TRUE]
32-length( countries2remove )
data_MrAB %>%
filter(attention_check_grater_than_3) %>%
group_by(subject,Country) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
ungroup() %>% #nrow() %>%
filter(sample_size>=250) %>% nrow()
data_MrAB %>%
filter(attention_check_grater_than_2) %>%
group_by(subject,Country) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
ungroup() %>% #nrow() %>%
filter(sample_size>=250) %>% nrow()
names(data_MrAB)
# Sample Size #
data_MrAB %>%
# filter(attention_check_grater_than_3) %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size<250)
# Sample Size #
data_MrAB %>%
# filter(attention_check_grater_than_3) %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size<250) %>%
nroe()
# Sample Size #
data_MrAB %>%
# filter(attention_check_grater_than_3) %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size<250) %>%
nrow()
# Sample Size #
data_MrAB %>%
# filter(attention_check_grater_than_3) %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size>=250) %>%
nrow()
# Sample Size #
data_MrAB %>%
# filter(attention_check_grater_than_3) %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Apply new criterion
filter(!loi_lower_than_loiX0_33) %>%
nrow()
names(data_MrAB)
# Sample Size #
data_MrAB %>%
# filter(attention_check_grater_than_3) %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Apply new criterion
# A
# filter(!loi_lower_than_loiX0_33) %>%
# B
filter(native_language_is_country_language) %>%
# C
# D
nrow()
# Sample Size #
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Apply new criterion
# A
# filter(!loi_lower_than_loiX0_33) %>%
# B
# filter(native_language_is_country_language) %>%
# C
filter(attention_check_grater_than_3) %>%
# D
nrow()
# Sample Size #
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Apply new criterion
# A
# filter(!loi_lower_than_loiX0_33) %>%
# B
# filter(native_language_is_country_language) %>%
# C
# filter(attention_check_grater_than_3) %>%
# D
filter(attention_check_grater_than_2) %>%
# Result
nrow()
# Sample Size #
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Apply new criterion
# A
filter(!loi_lower_than_loiX0_33) %>%
# B
filter(native_language_is_country_language) %>%
# C
# filter(attention_check_grater_than_3) %>%
# D
# filter(attention_check_grater_than_2) %>%
# Result
nrow()
# Sample Size #
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Apply new criterion
# A
filter(!loi_lower_than_loiX0_33) %>%
# B
# filter(native_language_is_country_language) %>%
# C
filter(attention_check_grater_than_3) %>%
# D
# filter(attention_check_grater_than_2) %>%
# Result
nrow()
# Sample Size #
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Apply new criterion
# A
filter(!loi_lower_than_loiX0_33) %>%
# B
# filter(native_language_is_country_language) %>%
# C
# filter(attention_check_grater_than_3) %>%
# D
filter(attention_check_grater_than_2) %>%
# Result
nrow()
# Sample Size #
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Apply new criterion
# A
# filter(!loi_lower_than_loiX0_33) %>%
# B
filter(native_language_is_country_language) %>%
# C
filter(attention_check_grater_than_3) %>%
# D
# filter(attention_check_grater_than_2) %>%
# Result
nrow()
# Sample Size #
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Apply new criterion
# A
# filter(!loi_lower_than_loiX0_33) %>%
# B
filter(native_language_is_country_language) %>%
# C
# filter(attention_check_grater_than_3) %>%
# D
filter(attention_check_grater_than_2) %>%
# Result
nrow()
# Sample Size #
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Apply new criterion
# A
filter(!loi_lower_than_loiX0_33) %>%
# B
filter(native_language_is_country_language) %>%
# C
filter(attention_check_grater_than_3) %>%
# D
# filter(attention_check_grater_than_2) %>%
# Result
nrow()
# Sample Size #
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
group_by(Country) %>%
mutate(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Apply new criterion
# A
filter(!loi_lower_than_loiX0_33) %>%
# B
filter(native_language_is_country_language) %>%
# C
# filter(attention_check_grater_than_3) %>%
# D
filter(attention_check_grater_than_2) %>%
# Result
nrow()
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
# Apply new criterion
# A
filter(!loi_lower_than_loiX0_33) %>%
# B
filter(native_language_is_country_language) %>%
# C
filter(attention_check_grater_than_3) %>%
# D
# filter(attention_check_grater_than_2) %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Result
nrow()
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
# Apply new criterion
# A
filter(!loi_lower_than_loiX0_33) %>%
# B
filter(native_language_is_country_language) %>%
# C
filter(attention_check_grater_than_3)
