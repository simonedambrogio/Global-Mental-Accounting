filter(attention_check_grater_than_2) %>%
# Result
nrow()
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
# Apply new criterion
# A
filter(!loi_lower_than_loiX0_33) %>%
# B
filter(native_language_is_country_language) %>%
# C
filter(attention_check_grater_than_3) %>%
# D
# filter(attention_check_grater_than_2) %>%
group_by(Country) %>%
summarise(sample_size=n()) %>%
filter(sample_size>=250) %>%
# Result
nrow()
data_MrAB %>%
group_by(subject) %>%
filter(row_number()==1) %>%
# Apply new criterion
# A
filter(!loi_lower_than_loiX0_33) %>%
# B
filter(native_language_is_country_language) %>%
# C
filter(attention_check_grater_than_3)
tab_01 = data.frame(
scale = c("BAS-T", "SR", "BDI", "ASRM", "M-SRM"),
high = c("46.17 (2.87)", "17.94 (1.88)", "7.11 (6.50)",
"6.46 (4.01)", "11.05 (3.36)"),
moderate = c("37.99 (1.32)", "11.52 (1.84)", "6.18 (6.09)",
"5.63 (3.69)", "11.76 (2.75)"),
p = c("<.001", "<.001", ".254", ".109", ".078")
)
# --- Hierarchical Bayesian Meta-Analysis  --- #
library(knitr)
library(kableExtra)
library(tidyverse)
tab_01 = data.frame(
scale = c("BAS-T", "SR", "BDI", "ASRM", "M-SRM"),
high = c("46.17 (2.87)", "17.94 (1.88)", "7.11 (6.50)",
"6.46 (4.01)", "11.05 (3.36)"),
moderate = c("37.99 (1.32)", "11.52 (1.84)", "6.18 (6.09)",
"5.63 (3.69)", "11.76 (2.75)"),
p = c("<.001", "<.001", ".254", ".109", ".078")
)
kable(
tab_01,
format = "latex",
booktabs = TRUE,
col.names = c("Scale", "High BAS group", "Moderate BAS group", "p"),
align = c("l", "c", "c", "c"),
caption = "Means and Standard Deviations of Scores on Baseline Measures"
)
lazyLoad('index_cache/html/table-preregistered-unpooled_591a32416c80fbb49caba5bf72c6b82a')
table_bayesian %>%
select(-Study) |>
kbl(caption="<b>Table 2 | </b> Hierarchical Bayesian Meta-Analysis",
format = "html", table.attr = "style='width:50%;'") %>%
kable_classic(html_font = "Cambria")
lazyLoad('index_cache/html/summary-fit-Plane-exploratory_0cf42442ce0d04cfced3042559806cff')
table_bayesian
lazyLoad('index_cache/html/summary-fit-Plane-exploratory_0cf42442ce0d04cfced3042559806cff.rdb')
lazyLoad('index_cache/html/summary-fit-Plane-exploratory_0cf42442ce0d04cfced3042559806cff')
lazyLoad('index_cache/html/Code-to-load-data-and-libraries_d4033ba30588e0897d19923a4badd205')
lazyLoad('index_cache/html/table-preregistered-unpooled_591a32416c80fbb49caba5bf72c6b82a')
lazyLoad('index_cache/html/table-preregistered_ba549cb52e56d286cc0e4e1f9896e415')
table_bayesian %>%
select(-Study) |>
kbl(caption="<b>Table 2 | </b> Hierarchical Bayesian Meta-Analysis",
format = "html", table.attr = "style='width:50%;'") %>%
kable_classic(html_font = "Cambria")
table_bayesian %>%
select(-Study) |>
kbl(caption="<b>Table 2 | </b> Hierarchical Bayesian Meta-Analysis",
format = "html", table.attr = "style='width:50%;'") %>%
kable_classic(html_font = "Cambria")
getwd()
table_bayesian %>%
select(-Study) |>
kbl(caption="<b>Table 2 | </b> Hierarchical Bayesian Meta-Analysis",
format = "html", table.attr = "style='width:50%;'") %>%
kable_classic(html_font = "Cambria") %>%
save_kable("test.pdf")
webshot::install_phantomjs()
table_bayesian %>%
select(-Study) |>
kbl(caption="<b>Table 2 | </b> Hierarchical Bayesian Meta-Analysis",
format = "html", table.attr = "style='width:50%;'") %>%
kable_classic(html_font = "Cambria") %>%
save_kable("test.pdf")
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics",
format = "html", table.attr = "style='width:50%;'") %>%
kable_classic(html_font = "Cambria")
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics",
format = "html", table.attr = "style='width:50%;'") %>%
kable_classic(html_font = "Cambria")
# --- Hierarchical Bayesian Meta-Analysis  --- #
library(knitr)
library(kableExtra)
library(tidyverse)
data.frame(Function = c("`read_delim()`", "a", letters[1:6]),
Formula = c("$\\leftarrow$", "a", letters[1:6]),
Break = c("this continues on a<br>new line", "a", letters[1:6]),
Link = c("[Google](www.google.com)", "a", letters[1:6])) |>
kbl(format = "markdown")
# Participants from 21 countries
df <- data_Plane %>%
filter(coupon=='free') %>%
# EXCLUSION: Full Exclusion
filter( !(Country %in% countries2remove) ) %>%
filter( attention_check_grater_than_3 )
lazyLoad('index_cache/html/Code-to-load-data-and-libraries_d4033ba30588e0897d19923a4badd205')
# Participants from 21 countries
df <- data_Plane %>%
filter(coupon=='free') %>%
# EXCLUSION: Full Exclusion
filter( !(Country %in% countries2remove) ) %>%
filter( attention_check_grater_than_3 )
length( unique(df$subject) )
df_egypt <- df %>% filter(coupon=="free") %>% filter(Country=='Egypt')
convert_farsi_to_arabic <- function(x) {
if(x=="٠"|x=="۰"){
return( "0" )
} else if (x=="۱" | x=="١"){
return( "1" )
} else if (x=="۲" | x=="٢"){
return( "2" )
} else if (x=="۳"|x=="٣"){
return( "3" )
} else if (x=="۴" | x=="٤"){
return( "4" )
} else if (x=="۵" | x=="٥"){
return( "5" )
} else if (x=="۶"|x=="٦"){
return( "6" )
} else if (x=="۷" | x=="٧"){
return( "7" )
} else if (x=="۸" | x=="٨"){
return( "8" )
} else if (x=="۹" | x=="٩"){
return( "9" )
} else if( any(x %in% as.character(0:9) ) ){
return( x )
} else {
warning( paste("Persian number", x, "not found!!!") )
}
}
convert <- function(x){
apply(
str_split(string = x, pattern = "", simplify = T),
2,
convert_farsi_to_arabic
) %>% paste0(collapse = "")
}
df[df$Country=='Egypt', "Age"] <-  sapply(as.list(df_egypt$Age), convert)
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics",
format = "html", table.attr = "style='width:50%;'") %>%
kable_classic(html_font = "Cambria")
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics",
format = "html", table.attr = "style='width:50%;'") %>%
kable_classic(html_font = "Cambria")
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics",
format = "html", table.attr = "style='width:50%;'") %>%
kable_classic(html_font = "Cambria")
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics",
format = "html", table.attr = "style='width:20%;'") %>%
kable_classic(html_font = "Cambria")
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics",
format = "html", table.attr = "style='width:40%;'") %>%
kable_classic(html_font = "Cambria")
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics", align=rep('c', 5),
format = "html", table.attr = "style='width:40%;'") %>%
kable_classic(html_font = "Cambria")
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics", align=rep('l', 5),
format = "html", table.attr = "style='width:40%;'") %>%
kable_classic(html_font = "Cambria")
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=round*as.numeric(Age))) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=round(as.numeric(Age))) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics", align=rep('l', 5),
format = "html", table.attr = "style='width:40%;'") %>%
kable_classic(html_font = "Cambria")
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=round(as.numeric(Age)),0) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics", align=rep('l', 5),
format = "html", table.attr = "style='width:40%;'") %>%
kable_classic(html_font = "Cambria")
df %>%
group_by(Country) %>%
mutate(Age=round(as.numeric(Age)),0)
test=df %>%
group_by(Country) %>%
mutate(Age=round(as.numeric(Age)),0)
test$Age
table(test$Age)
test=df %>%
group_by(Country) %>%
mutate(Age=round(as.numeric(Age)),0) %>%
filter(Age>0 && Age<99)
warnings()
df %>%
group_by(Country) %>%
mutate(Age=round(as.numeric(Age)),0) %>%
filter(Age>0 & Age<99)
test=df %>%
group_by(Country) %>%
mutate(Age=round(as.numeric(Age)),0) %>%
filter(Age>0 & Age<99)
table(test$Age)
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
filter(Age>0 & Age<99) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=round(as.numeric(Age)),0) %>%
filter(Age>0 & Age<99) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics", align=rep('l', 5),
format = "html", table.attr = "style='width:40%;'") %>%
kable_classic(html_font = "Cambria")
rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
filter(Age>0 & Age<99) %>%
summarise(
Country="pooled",
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=round(as.numeric(Age)),0) %>%
filter(Age>0 & Age<99) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(round(median(Age)), " (", round(quantile(Age,probs = .25)), "-", round(quantile(Age,probs = .75)), ")")
)
) %>%
kbl(caption="<b>Table 1 | </b> Demographics", align=rep('l', 5),
format = "html", table.attr = "style='width:40%;'") %>%
kable_classic(html_font = "Cambria")
