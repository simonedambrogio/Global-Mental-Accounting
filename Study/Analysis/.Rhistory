mutate(upper=ifelse(var=="Age", upper*sd(data$Age), upper)) %>%
# Education
mutate(beta=ifelse(var=="Education", beta*sd(data$Education), beta)) %>%
mutate(lower=ifelse(var=="Education", lower*sd(data$Education), lower)) %>%
mutate(upper=ifelse(var=="Education", upper*sd(data$Education), upper)) %>%
# Financial Literacy
mutate(beta=ifelse(var=="Financial\nLiteracy", beta*sd(data$FinancialLiteracy), beta)) %>%
mutate(lower=ifelse(var=="Financial\nLiteracy", lower*sd(data$FinancialLiteracy), lower)) %>%
mutate(upper=ifelse(var=="Financial\nLiteracy", upper*sd(data$FinancialLiteracy), upper)) %>%
# Income
mutate(beta=ifelse(var=="Income", beta*sd(data$numeric_income, na.rm=T), beta)) %>%
mutate(lower=ifelse(var=="Income", lower*sd(data$numeric_income, na.rm=T), lower)) %>%
mutate(upper=ifelse(var=="Income", upper*sd(data$numeric_income, na.rm=T), upper)) %>%
mutate(x = x+rep(c(0.2, 0.1, 0, -0.1, -0.2), 8)) %>%
ggplot(aes(x, beta, fill=var, color=study, shape=is_sign, linetype=is_sign)) +
geom_hline(yintercept = 0, linewidth=0.2) +
geom_segment(aes(x = x, xend=x, y=lower, yend=upper)) +
geom_point(stat="identity", size=3) +
theme_cowplot() +
scale_x_continuous(breaks = c(1.5, 3:8),
labels = c("MrAB", "Game", "Jacket", "Play",
"Plane", "Drink", "Gym"),
guide = "prism_offset") +
scale_y_continuous(guide = "prism_offset") +
labs(fill=NULL, x=NULL, y=expression(Standardized~beta), color="Study") +
theme(legend.position = c(0.85, 0.25),
text = element_text(size = 15),
# strip.background = element_rect(fill="#E2E2E2"),
strip.background = element_rect(fill="orange"),
# axis.ticks.x = element_blank(),
axis.text.x = element_blank()) +
guides(fill="none", alpha="none", shape="none", linetype="none") +
facet_wrap(~var) +
scale_color_manual(values = qualitative_hcl(7, "Dark 3"))
barplot(rep(1,10),sequential_hcl(10, "Light Grays"))
barplot(rep(1,10), col=sequential_hcl(10, "Light Grays"))
barplot(rep(1,20), col=sequential_hcl(20, "Light Grays"))
barplot(rep(1,20), col=sequential_hcl(20, "Grays"))
sequential_hcl(20, "Grays")
df %>%
mutate(study=ifelse( (study=="MrAB1" | study=="MrAB2"), "MrAB", study)) %>%
# Age
mutate(beta=ifelse(var=="Age", beta*sd(data$Age), beta)) %>%
mutate(lower=ifelse(var=="Age", lower*sd(data$Age), lower)) %>%
mutate(upper=ifelse(var=="Age", upper*sd(data$Age), upper)) %>%
# Education
mutate(beta=ifelse(var=="Education", beta*sd(data$Education), beta)) %>%
mutate(lower=ifelse(var=="Education", lower*sd(data$Education), lower)) %>%
mutate(upper=ifelse(var=="Education", upper*sd(data$Education), upper)) %>%
# Financial Literacy
mutate(beta=ifelse(var=="Financial\nLiteracy", beta*sd(data$FinancialLiteracy), beta)) %>%
mutate(lower=ifelse(var=="Financial\nLiteracy", lower*sd(data$FinancialLiteracy), lower)) %>%
mutate(upper=ifelse(var=="Financial\nLiteracy", upper*sd(data$FinancialLiteracy), upper)) %>%
# Income
mutate(beta=ifelse(var=="Income", beta*sd(data$numeric_income, na.rm=T), beta)) %>%
mutate(lower=ifelse(var=="Income", lower*sd(data$numeric_income, na.rm=T), lower)) %>%
mutate(upper=ifelse(var=="Income", upper*sd(data$numeric_income, na.rm=T), upper)) %>%
mutate(x = x+rep(c(0.2, 0.1, 0, -0.1, -0.2), 8)) %>%
ggplot(aes(x, beta, fill=var, color=study, shape=is_sign, linetype=is_sign)) +
geom_hline(yintercept = 0, linewidth=0.2) +
geom_segment(aes(x = x, xend=x, y=lower, yend=upper)) +
geom_point(stat="identity", size=3) +
theme_cowplot() +
scale_x_continuous(breaks = c(1.5, 3:8),
labels = c("MrAB", "Game", "Jacket", "Play",
"Plane", "Drink", "Gym"),
guide = "prism_offset") +
scale_y_continuous(guide = "prism_offset") +
labs(fill=NULL, x=NULL, y=expression(Standardized~beta), color="Study") +
theme(legend.position = c(0.85, 0.25),
text = element_text(size = 15),
# strip.background = element_rect(fill="#E2E2E2"),
strip.background = element_rect(fill="#F9F9F9"),
# axis.ticks.x = element_blank(),
axis.text.x = element_blank()) +
guides(fill="none", alpha="none", shape="none", linetype="none") +
facet_wrap(~var) +
scale_color_manual(values = qualitative_hcl(7, "Dark 3"))
df %>%
mutate(study=ifelse( (study=="MrAB1" | study=="MrAB2"), "MrAB", study)) %>%
# Age
mutate(beta=ifelse(var=="Age", beta*sd(data$Age), beta)) %>%
mutate(lower=ifelse(var=="Age", lower*sd(data$Age), lower)) %>%
mutate(upper=ifelse(var=="Age", upper*sd(data$Age), upper)) %>%
# Education
mutate(beta=ifelse(var=="Education", beta*sd(data$Education), beta)) %>%
mutate(lower=ifelse(var=="Education", lower*sd(data$Education), lower)) %>%
mutate(upper=ifelse(var=="Education", upper*sd(data$Education), upper)) %>%
# Financial Literacy
mutate(beta=ifelse(var=="Financial\nLiteracy", beta*sd(data$FinancialLiteracy), beta)) %>%
mutate(lower=ifelse(var=="Financial\nLiteracy", lower*sd(data$FinancialLiteracy), lower)) %>%
mutate(upper=ifelse(var=="Financial\nLiteracy", upper*sd(data$FinancialLiteracy), upper)) %>%
# Income
mutate(beta=ifelse(var=="Income", beta*sd(data$numeric_income, na.rm=T), beta)) %>%
mutate(lower=ifelse(var=="Income", lower*sd(data$numeric_income, na.rm=T), lower)) %>%
mutate(upper=ifelse(var=="Income", upper*sd(data$numeric_income, na.rm=T), upper)) %>%
mutate(x = x+rep(c(0.2, 0.1, 0, -0.1, -0.2), 8))
str(df)
df %>%
mutate(study=ifelse( (study=="MrAB1" | study=="MrAB2"), "MrAB", study)) %>%
# Age
mutate(beta=ifelse(var=="Age", beta*sd(data$Age), beta)) %>%
mutate(lower=ifelse(var=="Age", lower*sd(data$Age), lower)) %>%
mutate(upper=ifelse(var=="Age", upper*sd(data$Age), upper)) %>%
# Education
mutate(beta=ifelse(var=="Education", beta*sd(data$Education), beta)) %>%
mutate(lower=ifelse(var=="Education", lower*sd(data$Education), lower)) %>%
mutate(upper=ifelse(var=="Education", upper*sd(data$Education), upper)) %>%
# Financial Literacy
mutate(beta=ifelse(var=="Financial\nLiteracy", beta*sd(data$FinancialLiteracy), beta)) %>%
mutate(lower=ifelse(var=="Financial\nLiteracy", lower*sd(data$FinancialLiteracy), lower)) %>%
mutate(upper=ifelse(var=="Financial\nLiteracy", upper*sd(data$FinancialLiteracy), upper)) %>%
# Income
mutate(beta=ifelse(var=="Income", beta*sd(data$numeric_income, na.rm=T), beta)) %>%
mutate(lower=ifelse(var=="Income", lower*sd(data$numeric_income, na.rm=T), lower)) %>%
mutate(upper=ifelse(var=="Income", upper*sd(data$numeric_income, na.rm=T), upper)) %>%
mutate(x = x+rep(c(0.2, 0.1, 0, -0.1, -0.2), 8)) %>%
mutate(study=factor(study, labels = c("MrAB", "Game", "Jacket", "Play", "Plane", "Drink", "Gym"))) %>%
ggplot(aes(x, beta, fill=var, color=study, shape=is_sign, linetype=is_sign)) +
geom_hline(yintercept = 0, linewidth=0.2) +
geom_segment(aes(x = x, xend=x, y=lower, yend=upper)) +
geom_point(stat="identity", size=3) +
theme_cowplot() +
scale_x_continuous(breaks = c(1.5, 3:8),
labels = c("MrAB", "Game", "Jacket", "Play",
"Plane", "Drink", "Gym"),
guide = "prism_offset") +
scale_y_continuous(guide = "prism_offset") +
labs(fill=NULL, x=NULL, y=expression(Standardized~beta), color="Study") +
theme(legend.position = c(0.85, 0.25),
text = element_text(size = 15),
# strip.background = element_rect(fill="#E2E2E2"),
strip.background = element_rect(fill="#F9F9F9"),
# axis.ticks.x = element_blank(),
axis.text.x = element_blank()) +
guides(fill="none", alpha="none", shape="none", linetype="none") +
facet_wrap(~var) +
scale_color_manual(values = qualitative_hcl(7, "Dark 3"))
df %>%
mutate(study=ifelse( (study=="MrAB1" | study=="MrAB2"), "MrAB", study)) %>%
# Age
mutate(beta=ifelse(var=="Age", beta*sd(data$Age), beta)) %>%
mutate(lower=ifelse(var=="Age", lower*sd(data$Age), lower)) %>%
mutate(upper=ifelse(var=="Age", upper*sd(data$Age), upper)) %>%
# Education
mutate(beta=ifelse(var=="Education", beta*sd(data$Education), beta)) %>%
mutate(lower=ifelse(var=="Education", lower*sd(data$Education), lower)) %>%
mutate(upper=ifelse(var=="Education", upper*sd(data$Education), upper)) %>%
# Financial Literacy
mutate(beta=ifelse(var=="Financial\nLiteracy", beta*sd(data$FinancialLiteracy), beta)) %>%
mutate(lower=ifelse(var=="Financial\nLiteracy", lower*sd(data$FinancialLiteracy), lower)) %>%
mutate(upper=ifelse(var=="Financial\nLiteracy", upper*sd(data$FinancialLiteracy), upper)) %>%
# Income
mutate(beta=ifelse(var=="Income", beta*sd(data$numeric_income, na.rm=T), beta)) %>%
mutate(lower=ifelse(var=="Income", lower*sd(data$numeric_income, na.rm=T), lower)) %>%
mutate(upper=ifelse(var=="Income", upper*sd(data$numeric_income, na.rm=T), upper)) %>%
mutate(x = x+rep(c(0.2, 0.1, 0, -0.1, -0.2), 8)) %>%
mutate(study=factor(study, labels = c("MrAB", "Game", "Jacket", "Play", "Plane", "Drink", "Gym"),
levels = c("MrAB", "Game", "Jacket", "Play", "Plane", "Drink", "Gym"),
)) %>%
ggplot(aes(x, beta, fill=var, color=study, shape=is_sign, linetype=is_sign)) +
geom_hline(yintercept = 0, linewidth=0.2) +
geom_segment(aes(x = x, xend=x, y=lower, yend=upper)) +
geom_point(stat="identity", size=3) +
theme_cowplot() +
scale_x_continuous(breaks = c(1.5, 3:8),
labels = c("MrAB", "Game", "Jacket", "Play",
"Plane", "Drink", "Gym"),
guide = "prism_offset") +
scale_y_continuous(guide = "prism_offset") +
labs(fill=NULL, x=NULL, y=expression(Standardized~beta), color="Study") +
theme(legend.position = c(0.85, 0.25),
text = element_text(size = 15),
# strip.background = element_rect(fill="#E2E2E2"),
strip.background = element_rect(fill="#F9F9F9"),
# axis.ticks.x = element_blank(),
axis.text.x = element_blank()) +
guides(fill="none", alpha="none", shape="none", linetype="none") +
facet_wrap(~var) +
scale_color_manual(values = qualitative_hcl(7, "Dark 3"))
df %>%
mutate(study=ifelse( (study=="MrAB1" | study=="MrAB2"), "MrAB", study)) %>%
# Age
mutate(beta=ifelse(var=="Age", beta*sd(data$Age), beta)) %>%
mutate(lower=ifelse(var=="Age", lower*sd(data$Age), lower)) %>%
mutate(upper=ifelse(var=="Age", upper*sd(data$Age), upper)) %>%
# Education
mutate(beta=ifelse(var=="Education", beta*sd(data$Education), beta)) %>%
mutate(lower=ifelse(var=="Education", lower*sd(data$Education), lower)) %>%
mutate(upper=ifelse(var=="Education", upper*sd(data$Education), upper)) %>%
# Financial Literacy
mutate(beta=ifelse(var=="Financial\nLiteracy", beta*sd(data$FinancialLiteracy), beta)) %>%
mutate(lower=ifelse(var=="Financial\nLiteracy", lower*sd(data$FinancialLiteracy), lower)) %>%
mutate(upper=ifelse(var=="Financial\nLiteracy", upper*sd(data$FinancialLiteracy), upper)) %>%
# Income
mutate(beta=ifelse(var=="Income", beta*sd(data$numeric_income, na.rm=T), beta)) %>%
mutate(lower=ifelse(var=="Income", lower*sd(data$numeric_income, na.rm=T), lower)) %>%
mutate(upper=ifelse(var=="Income", upper*sd(data$numeric_income, na.rm=T), upper)) %>%
mutate(x = x+rep(c(0.2, 0.1, 0, -0.1, -0.2), 8)) %>%
mutate(study=factor(study, labels = c("MrAB", "Game", "Jacket", "Play", "Plane", "Drink", "Gym"),
levels = c("MrAB", "Game", "Jacket", "Play", "Plane", "Drink", "Gym"),
)) %>%
ggplot(aes(x, beta, fill=var, color=study, shape=is_sign, linetype=is_sign)) +
geom_hline(yintercept = 0, linewidth=0.2) +
geom_segment(aes(x = x, xend=x, y=lower, yend=upper)) +
geom_point(stat="identity", size=3) +
theme_cowplot() +
scale_x_continuous(breaks = c(1.5, 3:8),
labels = c("MrAB", "Game", "Jacket", "Play",
"Plane", "Drink", "Gym"),
guide = "prism_offset") +
scale_y_continuous(guide = "prism_offset") +
labs(fill=NULL, x=NULL, y=expression(Standardized~beta), color="Study") +
theme(legend.position = c(0.85, 0.25),
text = element_text(size = 15),
# strip.background = element_rect(fill="#E2E2E2"),
strip.background = element_rect(fill="#F9F9F9"),
# axis.ticks.x = element_blank(),
axis.text.x = element_blank()) +
guides(fill="none", alpha="none", shape="none", linetype="none") +
facet_wrap(~var) +
scale_color_manual(values = qualitative_hcl(7, "Dark 3")[c(5, 2, 4, 7, 6, 1, 3)])
ggsave("test/exploratory.png", device = "png", width = 8, height = 4.5)
df %>%
mutate(study=ifelse( (study=="MrAB1" | study=="MrAB2"), "MrAB", study)) %>%
# Age
mutate(beta=ifelse(var=="Age", beta*sd(data$Age), beta)) %>%
mutate(lower=ifelse(var=="Age", lower*sd(data$Age), lower)) %>%
mutate(upper=ifelse(var=="Age", upper*sd(data$Age), upper)) %>%
# Education
mutate(beta=ifelse(var=="Education", beta*sd(data$Education), beta)) %>%
mutate(lower=ifelse(var=="Education", lower*sd(data$Education), lower)) %>%
mutate(upper=ifelse(var=="Education", upper*sd(data$Education), upper)) %>%
# Financial Literacy
mutate(beta=ifelse(var=="Financial\nLiteracy", beta*sd(data$FinancialLiteracy), beta)) %>%
mutate(lower=ifelse(var=="Financial\nLiteracy", lower*sd(data$FinancialLiteracy), lower)) %>%
mutate(upper=ifelse(var=="Financial\nLiteracy", upper*sd(data$FinancialLiteracy), upper)) %>%
# Income
mutate(beta=ifelse(var=="Income", beta*sd(data$numeric_income, na.rm=T), beta)) %>%
mutate(lower=ifelse(var=="Income", lower*sd(data$numeric_income, na.rm=T), lower)) %>%
mutate(upper=ifelse(var=="Income", upper*sd(data$numeric_income, na.rm=T), upper)) %>%
mutate(x = x+rep(c(0.2, 0.1, 0, -0.1, -0.2), 8))
df %>%
mutate(study=ifelse( (study=="MrAB1" | study=="MrAB2"), "MrAB", study)) %>%
# Age
mutate(beta=ifelse(var=="Age", beta*sd(data$Age), beta)) %>%
mutate(lower=ifelse(var=="Age", lower*sd(data$Age), lower)) %>%
mutate(upper=ifelse(var=="Age", upper*sd(data$Age), upper)) %>%
# Education
mutate(beta=ifelse(var=="Education", beta*sd(data$Education), beta)) %>%
mutate(lower=ifelse(var=="Education", lower*sd(data$Education), lower)) %>%
mutate(upper=ifelse(var=="Education", upper*sd(data$Education), upper)) %>%
# Financial Literacy
mutate(beta=ifelse(var=="Financial\nLiteracy", beta*sd(data$FinancialLiteracy), beta)) %>%
mutate(lower=ifelse(var=="Financial\nLiteracy", lower*sd(data$FinancialLiteracy), lower)) %>%
mutate(upper=ifelse(var=="Financial\nLiteracy", upper*sd(data$FinancialLiteracy), upper)) %>%
# Income
mutate(beta=ifelse(var=="Income", beta*sd(data$numeric_income, na.rm=T), beta)) %>%
mutate(lower=ifelse(var=="Income", lower*sd(data$numeric_income, na.rm=T), lower)) %>%
mutate(upper=ifelse(var=="Income", upper*sd(data$numeric_income, na.rm=T), upper)) %>%
mutate(x = x+rep(c(0.2, 0.1, 0, -0.1, -0.2), 8)) %>%
filter(var=='Gender')
df %>%
mutate(study=ifelse( (study=="MrAB1" | study=="MrAB2"), "MrAB", study)) %>%
# Age
mutate(beta=ifelse(var=="Age", beta*sd(data$Age), beta)) %>%
mutate(lower=ifelse(var=="Age", lower*sd(data$Age), lower)) %>%
mutate(upper=ifelse(var=="Age", upper*sd(data$Age), upper)) %>%
# Education
mutate(beta=ifelse(var=="Education", beta*sd(data$Education), beta)) %>%
mutate(lower=ifelse(var=="Education", lower*sd(data$Education), lower)) %>%
mutate(upper=ifelse(var=="Education", upper*sd(data$Education), upper)) %>%
# Financial Literacy
mutate(beta=ifelse(var=="Financial\nLiteracy", beta*sd(data$FinancialLiteracy), beta)) %>%
mutate(lower=ifelse(var=="Financial\nLiteracy", lower*sd(data$FinancialLiteracy), lower)) %>%
mutate(upper=ifelse(var=="Financial\nLiteracy", upper*sd(data$FinancialLiteracy), upper)) %>%
# Income
mutate(beta=ifelse(var=="Income", beta*sd(data$numeric_income, na.rm=T), beta)) %>%
mutate(lower=ifelse(var=="Income", lower*sd(data$numeric_income, na.rm=T), lower)) %>%
mutate(upper=ifelse(var=="Income", upper*sd(data$numeric_income, na.rm=T), upper)) %>%
mutate(x = x+rep(c(0.2, 0.1, 0, -0.1, -0.2), 8)) %>%
filter(var=='Education')
df %>%
mutate(study=ifelse( (study=="MrAB1" | study=="MrAB2"), "MrAB", study)) %>%
# Age
mutate(beta=ifelse(var=="Age", beta*sd(data$Age), beta)) %>%
mutate(lower=ifelse(var=="Age", lower*sd(data$Age), lower)) %>%
mutate(upper=ifelse(var=="Age", upper*sd(data$Age), upper)) %>%
# Education
mutate(beta=ifelse(var=="Education", beta*sd(data$Education), beta)) %>%
mutate(lower=ifelse(var=="Education", lower*sd(data$Education), lower)) %>%
mutate(upper=ifelse(var=="Education", upper*sd(data$Education), upper)) %>%
# Financial Literacy
mutate(beta=ifelse(var=="Financial\nLiteracy", beta*sd(data$FinancialLiteracy), beta)) %>%
mutate(lower=ifelse(var=="Financial\nLiteracy", lower*sd(data$FinancialLiteracy), lower)) %>%
mutate(upper=ifelse(var=="Financial\nLiteracy", upper*sd(data$FinancialLiteracy), upper)) %>%
# Income
mutate(beta=ifelse(var=="Income", beta*sd(data$numeric_income, na.rm=T), beta)) %>%
mutate(lower=ifelse(var=="Income", lower*sd(data$numeric_income, na.rm=T), lower)) %>%
mutate(upper=ifelse(var=="Income", upper*sd(data$numeric_income, na.rm=T), upper)) %>%
mutate(x = x+rep(c(0.2, 0.1, 0, -0.1, -0.2), 8)) %>%
filter(var=='Income')
df %>%
mutate(study=ifelse( (study=="MrAB1" | study=="MrAB2"), "MrAB", study)) %>%
# Age
mutate(beta=ifelse(var=="Age", beta*sd(data$Age), beta)) %>%
mutate(lower=ifelse(var=="Age", lower*sd(data$Age), lower)) %>%
mutate(upper=ifelse(var=="Age", upper*sd(data$Age), upper)) %>%
# Education
mutate(beta=ifelse(var=="Education", beta*sd(data$Education), beta)) %>%
mutate(lower=ifelse(var=="Education", lower*sd(data$Education), lower)) %>%
mutate(upper=ifelse(var=="Education", upper*sd(data$Education), upper)) %>%
# Financial Literacy
mutate(beta=ifelse(var=="Financial\nLiteracy", beta*sd(data$FinancialLiteracy), beta)) %>%
mutate(lower=ifelse(var=="Financial\nLiteracy", lower*sd(data$FinancialLiteracy), lower)) %>%
mutate(upper=ifelse(var=="Financial\nLiteracy", upper*sd(data$FinancialLiteracy), upper)) %>%
# Income
mutate(beta=ifelse(var=="Income", beta*sd(data$numeric_income, na.rm=T), beta)) %>%
mutate(lower=ifelse(var=="Income", lower*sd(data$numeric_income, na.rm=T), lower)) %>%
mutate(upper=ifelse(var=="Income", upper*sd(data$numeric_income, na.rm=T), upper)) %>%
mutate(x = x+rep(c(0.2, 0.1, 0, -0.1, -0.2), 8)) %>%
filter(var=='Financial\nLiteracy')
df %>%
mutate(study=ifelse( (study=="MrAB1" | study=="MrAB2"), "MrAB", study)) %>%
# Age
mutate(beta=ifelse(var=="Age", beta*sd(data$Age), beta)) %>%
mutate(lower=ifelse(var=="Age", lower*sd(data$Age), lower)) %>%
mutate(upper=ifelse(var=="Age", upper*sd(data$Age), upper)) %>%
# Education
mutate(beta=ifelse(var=="Education", beta*sd(data$Education), beta)) %>%
mutate(lower=ifelse(var=="Education", lower*sd(data$Education), lower)) %>%
mutate(upper=ifelse(var=="Education", upper*sd(data$Education), upper)) %>%
# Financial Literacy
mutate(beta=ifelse(var=="Financial\nLiteracy", beta*sd(data$FinancialLiteracy), beta)) %>%
mutate(lower=ifelse(var=="Financial\nLiteracy", lower*sd(data$FinancialLiteracy), lower)) %>%
mutate(upper=ifelse(var=="Financial\nLiteracy", upper*sd(data$FinancialLiteracy), upper)) %>%
# Income
mutate(beta=ifelse(var=="Income", beta*sd(data$numeric_income, na.rm=T), beta)) %>%
mutate(lower=ifelse(var=="Income", lower*sd(data$numeric_income, na.rm=T), lower)) %>%
mutate(upper=ifelse(var=="Income", upper*sd(data$numeric_income, na.rm=T), upper)) %>%
mutate(x = x+rep(c(0.2, 0.1, 0, -0.1, -0.2), 8)) %>%
filter(var=='Age')
ggsave("test/exploratory.svg", device = "svg", width = 8, height = 4.5)
library(knitr)
library(kableExtra)
library(tidyverse)
# --- Table Demographics --- #
lazyLoad("index_cache/html/Code-to-load-data-and-libraries_37cc09b9b8b38c500f5001a43db21c81")
# --- Table Demographics --- #
lazyLoad("index_cache/html/Code-to-load-data-and-libraries_ac2dcc77804d4e19a61ad58c57f9e0c7")
# Participants from 21 countries
df <- data_Plane %>%
filter(coupon=='free') %>%
# EXCLUSION: Preregistered
filter( !(Country %in% countries2remove) ) %>%
filter( attention_check_grater_than_3 )
df_egypt <- df %>% filter(coupon=="free") %>% filter(Country=='Egypt')
convert_farsi_to_arabic <- function(x) {
if(x=="٠"|x=="۰"){
return( "0" )
} else if (x=="۱" | x=="١"){
return( "1" )
} else if (x=="۲" | x=="٢"){
return( "2" )
} else if (x=="۳"|x=="٣"){
return( "3" )
} else if (x=="۴" | x=="٤"){
return( "4" )
} else if (x=="۵" | x=="٥"){
return( "5" )
} else if (x=="۶"|x=="٦"){
return( "6" )
} else if (x=="۷" | x=="٧"){
return( "7" )
} else if (x=="۸" | x=="٨"){
return( "8" )
} else if (x=="۹" | x=="٩"){
return( "9" )
} else if( any(x %in% as.character(0:9) ) ){
return( x )
} else {
warning( paste("Persian number", x, "not found!!!") )
}
}
convert <- function(x){
apply(
str_split(string = x, pattern = "", simplify = T),
2,
convert_farsi_to_arabic
) %>% paste0(collapse = "")
}
df[df$Country=='Egypt', "Age"] <-  sapply(as.list(df_egypt$Age), convert)
data_table <- rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
filter(Age>0 & Age<99) %>%
summarise(
Country="Pooled",
Language="",
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=round(as.numeric(Age)),0) %>%
filter(Age>0 & Age<99) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(round(median(Age)), " (", round(quantile(Age,probs = .25)), "-", round(quantile(Age,probs = .75)), ")")
)
) %>%
mutate(
Language=ifelse(Country=="Canada", "English, French", Language),
Language=ifelse(Country=="India", "Hindi, Tamil, English", Language)
)
data_table %>%
kable(caption="<b>Table 1 | </b> Demographics", align=rep('l', 5),
table.attr = "style='width:40%;'", booktabs = T) %>%
kable_classic(html_font = "Cambria") %>%
# kable_material(c("striped", "hover")) %>%
row_spec(0, bold = TRUE) %>%
save_kable("tables/png/Demographics.png", zoom = 3)
data_table %>%
kable(caption="<b>Table 1 | </b> Demographics", align=rep('l', 5),
table.attr = "style='width:40%;'", booktabs = T) %>%
kable_classic(html_font = "Cambria") %>%
# kable_material(c("striped", "hover")) %>%
row_spec(0, bold = TRUE)
# --- Table Demographics --- #
lazyLoad("index_cache/html/Code-to-load-data-and-libraries_ac2dcc77804d4e19a61ad58c57f9e0c7")
library(knitr)
library(kableExtra)
library(tidyverse)
# Participants from 21 countries
df <- data_Plane %>%
filter(coupon=='free') %>%
# EXCLUSION: Preregistered
filter( !(Country %in% countries2remove) ) %>%
filter( attention_check_grater_than_3 )
df_egypt <- df %>% filter(coupon=="free") %>% filter(Country=='Egypt')
convert_farsi_to_arabic <- function(x) {
if(x=="٠"|x=="۰"){
return( "0" )
} else if (x=="۱" | x=="١"){
return( "1" )
} else if (x=="۲" | x=="٢"){
return( "2" )
} else if (x=="۳"|x=="٣"){
return( "3" )
} else if (x=="۴" | x=="٤"){
return( "4" )
} else if (x=="۵" | x=="٥"){
return( "5" )
} else if (x=="۶"|x=="٦"){
return( "6" )
} else if (x=="۷" | x=="٧"){
return( "7" )
} else if (x=="۸" | x=="٨"){
return( "8" )
} else if (x=="۹" | x=="٩"){
return( "9" )
} else if( any(x %in% as.character(0:9) ) ){
return( x )
} else {
warning( paste("Persian number", x, "not found!!!") )
}
}
convert <- function(x){
apply(
str_split(string = x, pattern = "", simplify = T),
2,
convert_farsi_to_arabic
) %>% paste0(collapse = "")
}
df[df$Country=='Egypt', "Age"] <-  sapply(as.list(df_egypt$Age), convert)
data_table <- rbind(
df %>%
mutate(Age=as.numeric(Age)) %>%
filter(Age>0 & Age<99) %>%
summarise(
Country="Pooled",
Language="",
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(median(Age), " (", quantile(Age,probs = .25), "-", quantile(Age,probs = .75), ")")
),
df %>%
group_by(Country) %>%
mutate(Age=round(as.numeric(Age)),0) %>%
filter(Age>0 & Age<99) %>%
summarise(
Country=names(which.max(table(Country))),
Language=names(which.max(table(NativeLanguage))),
n = n(),
`% female` = round(mean(Gender=='Female')*100,2),
`Age, median (IQR) (yr)` = str_c(round(median(Age)), " (", round(quantile(Age,probs = .25)), "-", round(quantile(Age,probs = .75)), ")")
)
) %>%
mutate(
Language=ifelse(Country=="Canada", "English, French", Language),
Language=ifelse(Country=="India", "Hindi, Tamil, English", Language)
)
data_table %>%
kable(caption="<b>Table 1 | </b> Demographics", align=rep('l', 5),
table.attr = "style='width:40%;'", booktabs = T) %>%
kable_classic(html_font = "Cambria") %>%
# kable_material(c("striped", "hover")) %>%
row_spec(0, bold = TRUE)
